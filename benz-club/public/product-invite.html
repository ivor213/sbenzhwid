<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Invite Code - Shop - supremacy.club</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <link rel="stylesheet" href="assets/css/product-invite.css" />
</head>
<body>
  <div id="back-arrow" class="back-arrow">&larr;</div>
  <canvas id="matrix-canvas"></canvas>
  <canvas id="grid-canvas"></canvas>
  <div class="crt-overlay"></div>
  <div class="product-main">
    <div class="product-box">
      <div class="product-header">Invite Code</div>
      <div class="product-icon">
        <img src="https://img.icons8.com/ios/50/code--v1.png" alt="Key Icon" />
      </div>
      <div class="product-desc">Buy an invite code to give your friends access to supremacy.club. Lifetime access, instant delivery after payment.</div>
      <div class="product-price">$1.99</div>
      <div class="product-payment-label">Payment Method <span class="required-field">*</span></div>
      <select class="product-payment-select" id="payment-method-select">
        <option value="" disabled selected>Select Payment Method</option>
        <option value="crypto">Cryptocurrency</option>
      </select>
      <div id="payment-crypto" class="payment-section crypto">
        <div class="crypto-instructions">Select a cryptocurrency and send $1.99 worth:</div>
        <select id="crypto-select" class="product-payment-select crypto-select">
          <option value="btc">Bitcoin (BTC)</option>
          <option value="bch">Bitcoin Cash (BCH)</option>
          <option value="doge">Dogecoin (DOGE)</option>
        </select>
        <div id="crypto-btc" class="crypto-method">
          <div class="crypto-address">bc1qkqwy50yvuls6r8ddz93424p0a8s0auaf508uzr</div>
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=bc1qkqwy50yvuls6r8ddz93424p0a8s0auaf508uzr" alt="BTC QR" class="crypto-qr" />
        </div>
        <div id="crypto-bch" class="crypto-method">
          <div class="crypto-address">bitcoincash:qptr9mp4e82g4elrn5xrgrjn6pgthj3fgsyp3glsm6</div>
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=bitcoincash:qptr9mp4e82g4elrn5xrgrjn6pgthj3fgsyp3glsm6" alt="BCH QR" class="crypto-qr" />
        </div>
        <div id="crypto-doge" class="crypto-method">
          <div class="crypto-address">DCCfcQDeGyNacdTHosTjnhBR54Lko3a2R8</div>
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=DCCfcQDeGyNacdTHosTjnhBR54Lko3a2R8" alt="DOGE QR" class="crypto-qr" />
        </div>
        <button class="product-buy-btn crypto-paid-btn" id="crypto-paid-btn">Mark as Paid</button>
        <div id="crypto-status-msg" class="crypto-status"></div>
      </div>
      <button class="product-buy-btn" id="buy-now-btn" disabled>Buy Now</button>
      <div class="product-buy-message" id="product-buy-message"></div>
    </div>
  </div>
  <script src="assets/js/script.js"></script>

  <script src="assets/js/product-invite.js"></script>
  <script>
    const select = document.getElementById('payment-method-select');
    const buyBtn = document.getElementById('buy-now-btn');
    const msg = document.getElementById('product-buy-message');
    const cryptoDiv = document.getElementById('payment-crypto');
    select.addEventListener('change', function() {
      cryptoDiv.style.display = select.value === 'crypto' ? '' : 'none';
      buyBtn.style.display = 'none';
    });
    // Crypto Mark as Paid
    document.getElementById('crypto-paid-btn').onclick = function() {
      const method = cryptoSelect.value;
      document.getElementById('crypto-status-msg').textContent = 'Submitting payment...';
      fetch('/api/crypto/mark-paid', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ method })
      })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          document.getElementById('crypto-status-msg').innerHTML = 'Payment marked as paid. Your invite code will be delivered after confirmation.';
        } else {
          document.getElementById('crypto-status-msg').textContent = data.message || 'Error submitting payment.';
        }
      });
    };
    select.addEventListener('change', function() {
      buyBtn.disabled = !select.value;
    });
    buyBtn.addEventListener('click', function() {
      msg.textContent = 'Payment integration coming soon!';
    });
    document.getElementById('back-arrow').onclick = function() {
      window.location.href = 'shop.html';
    };
    // Crypto currency selection logic
    const cryptoSelect = document.getElementById('crypto-select');
    const cryptoBTC = document.getElementById('crypto-btc');
    const cryptoBCH = document.getElementById('crypto-bch');
    const cryptoDOGE = document.getElementById('crypto-doge');
    if (cryptoSelect) {
      cryptoSelect.addEventListener('change', function() {
        cryptoBTC.style.display = cryptoSelect.value === 'btc' ? 'flex' : 'none';
        cryptoBCH.style.display = cryptoSelect.value === 'bch' ? 'flex' : 'none';
        cryptoDOGE.style.display = cryptoSelect.value === 'doge' ? 'flex' : 'none';
      });
      // Set default
      cryptoBTC.style.display = 'flex';
      cryptoBCH.style.display = 'none';
      cryptoDOGE.style.display = 'none';
    }
    // Helper: Show invite code after payment
    function showInviteCode(inviteCode) {
      msg.innerHTML = `
        <div class="invite-code-success">Your Invite Code:</div>
        <div id='invite-code-box' class="invite-code-box">
          <span id='invite-code-text'>${inviteCode}</span>
          <span id='copied-float' class="copied-float">Copied!</span>
        </div>
        <div class="invite-instructions">Click the code to copy. This code is single-use.</div>
      `;
      
      // Add click to copy functionality
      document.getElementById('invite-code-box').onclick = function() {
        const el = document.createElement('textarea');
        el.value = inviteCode;
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);
        
        // Show copied feedback
        const floatMsg = document.getElementById('copied-float');
        floatMsg.style.display = 'block';
        floatMsg.style.opacity = 1;
        floatMsg.style.transform = 'translateY(-18px)';
        setTimeout(() => {
          floatMsg.style.opacity = 0;
          floatMsg.style.transform = 'translateY(-32px)';
        }, 700);
        setTimeout(() => {
          floatMsg.style.display = 'none';
          floatMsg.style.opacity = 1;
          floatMsg.style.transform = 'translateY(-18px)';
        }, 1200);
      };
    }
  </script>
  
</body>
</html> 